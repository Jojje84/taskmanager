<div class="team-wrapper">
  <div class="top-container">
    <input
      [(ngModel)]="searchQuery"
      placeholder="Search a member"
      class="search-input"
      (input)="filterUsers()"
    />
    <button class="btn-newuser" (click)="openUserFormDialog()">New User</button>
  </div>

  <div class="user-container">
    <div class="user-card" *ngFor="let user of filteredUsers">
      <div class="user-header">
        <div class="user-avatar">
          <img src="user.png" alt="User Avatar" class="user-avatar-img" />
        </div>
        <div class="user-info">
          <span class="user-name">{{ user.name }}</span>
          <span class="user-role">{{ user.role }}</span>
          <span class="user-overview">
            Projects: {{ getProjectCount(user) }} | Tasks:
            {{ getTaskCount(user) }}
          </span>
        </div>
      </div>

      <div class="stats">
        <h3>Task Priority</h3>
        <div class="task-progress">
          <div
            class="progress-bar high"
            [style.width.%]="getTaskPercentage(user, 'High')"
          >
            {{ getTaskPercentage(user, "High") | number : "1.0-0" }}%
          </div>
          <div
            class="progress-bar normal"
            [style.width.%]="getTaskPercentage(user, 'Normal')"
          >
            {{ getTaskPercentage(user, "Normal") | number : "1.0-0" }}%
          </div>
          <div
            class="progress-bar low"
            [style.width.%]="getTaskPercentage(user, 'Low')"
          >
            {{ getTaskPercentage(user, "Low") | number : "1.0-0" }}%
          </div>
        </div>
      </div>

      <div class="user-actions">
        <button class="btn btn-view" (click)="selectUser(user)">
          <img src="view-icon.png" alt="View" class="btn-icon" /></button>
        <button class="btn btn-edit" (click)="openUserDetailDialog(user)">
          <img src="edit-icon.png" alt="Edit" class="btn-icon" /></button>
        <button class="btn btn-delete" (click)="deleteUser(user)">
          <img src="delete-icon.png" alt="Delete" class="btn-icon" /></button>
      </div>
    </div>
  </div>
</div>
