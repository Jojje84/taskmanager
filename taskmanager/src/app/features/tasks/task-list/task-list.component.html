<div class="task-wrapper">
  <div class="top-container">
    <input
      type="text"
      placeholder="Search task..."
      class="search-input"
      (input)="onSearch($any($event.target).value)"
    />
    <button class="btn-newtask" (click)="openTaskFormDialog()">New Task</button>
  </div>

  <div class="task-container">
    <div class="task-columns">
      <!-- Kolumn för Low Priority -->
      <div
        class="task-column low"
        cdkDropList
        [cdkDropListData]="lowPriorityTasks"
        [cdkDropListConnectedTo]="['medium', 'high', 'completed']"
        id="low"
        (cdkDropListDropped)="onTaskDrop($event)"
      >
        <h3>Low</h3>
        <div
          class="task-card low"
          *ngFor="let task of lowPriorityTasks"
          cdkDrag
        >
          <h4>{{ task.title }}</h4>
          <p>{{ task.status }}</p>

          <div class="task-actions">
            <button class="btn btn-edit" (click)="editTask(task)">
              <img src="edit-icon.png" alt="Edit" class="btn-icon" />
            </button>
            <button class="btn btn-delete" (click)="deleteTask(task.id)">
              <img src="delete-icon.png" alt="Delete" class="btn-icon" />
            </button>
          </div>
        </div>
      </div>

      <!-- Kolumn för Medium Priority -->
      <div
        class="task-column medium"
        cdkDropList
        [cdkDropListData]="mediumPriorityTasks"
        [cdkDropListConnectedTo]="['low', 'high', 'completed']"
        id="medium"
        (cdkDropListDropped)="onTaskDrop($event)"
      >
        <h3>Medium</h3>
        <div
          class="task-card medium"
          *ngFor="let task of mediumPriorityTasks"
          cdkDrag
        >
          <h4>{{ task.title }}</h4>
          <p>{{ task.status }}</p>

          <div class="task-actions">
            <button class="btn btn-edit" (click)="editTask(task)">
              <img src="edit-icon.png" alt="Edit" class="btn-icon" />
            </button>
            <button class="btn btn-delete" (click)="deleteTask(task.id)">
              <img src="delete-icon.png" alt="Delete" class="btn-icon" />
            </button>
          </div>
        </div>
      </div>

      <!-- Kolumn för High Priority -->
      <div
        class="task-column high"
        cdkDropList
        [cdkDropListData]="highPriorityTasks"
        [cdkDropListConnectedTo]="['low', 'medium', 'completed']"
        id="high"
        (cdkDropListDropped)="onTaskDrop($event)"
      >
        <h3>High</h3>
        <div
          class="task-card high"
          *ngFor="let task of highPriorityTasks"
          cdkDrag
        >
          <h4>{{ task.title }}</h4>
          <p>{{ task.status }}</p>

          <div class="task-actions">
            <button class="btn btn-edit" (click)="editTask(task)">
              <img src="edit-icon.png" alt="Edit" class="btn-icon" />
            </button>
            <button class="btn btn-delete" (click)="deleteTask(task.id)">
              <img src="delete-icon.png" alt="Delete" class="btn-icon" />
            </button>
          </div>
        </div>
      </div>

      <!-- Kolumn för Completed -->
      <div
        class="task-column completed"
        cdkDropList
        [cdkDropListData]="completedTasks"
        [cdkDropListConnectedTo]="['low', 'medium', 'high']"
        id="completed"
        (cdkDropListDropped)="onTaskDrop($event)"
      >
        <h3>Completed</h3>
        <div
          class="task-card completed"
          *ngFor="let task of completedTasks"
          cdkDrag
        >
          <h4>{{ task.title }}</h4>
          <p>{{ task.status }}</p>

          <div class="task-actions">
            <button class="btn btn-edit" (click)="editTask(task)">
              <img src="edit-icon.png" alt="Edit" class="btn-icon" />
            </button>
            <button class="btn btn-delete" (click)="deleteTask(task.id)">
              <img src="delete-icon.png" alt="Delete" class="btn-icon" />
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
